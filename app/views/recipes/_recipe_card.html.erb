<div class="col-md-4">
  <%= turbo_frame_tag recipe do %>

    <div class="card mt-2 mb-2">

        <% if recipe.image.attached? %>
          <%= image_tag recipe.image, class: "card-img-top" %>
        <% else %>
          <%= image_tag url_for("/assets/no-photo-icon-28.jpg"), class: "card-img-top" %>
        <% end %>    

        <div class="card-body">

          <h5 class="card-title"><%= recipe.title %></h5>
          <p class="card-text"><%= recipe.brief_info %></p>

          <table class="mt-3 ms-3">
            <tr>
              <td>Halal</td>
              <td>
                <% if recipe.is_halal? %>
                  <i class="fa-solid fa-circle-check ms-2" style="color: green"></i>
                <% else %>
                  <i class="fa-solid fa-circle-xmark ms-2" style="color: red"></i>
                <% end %>
              </td>
            </tr>
            <tr>
              <td>Kocher</td>
              <td>
                <% if recipe.is_kosher? %>
                  <i class="fa-solid fa-circle-check ms-2" style="color: green"></i>
                <% else %>
                  <i class="fa-solid fa-circle-xmark ms-2" style="color: red"></i>
                <% end %>
              </td>
            </tr>
            <tr>
              <td>Vegetarian</td>
              <td>
                <% if recipe.is_vegetarian? %>
                  <i class="fa-solid fa-circle-check ms-2" style="color: green"></i>
                <% else %>
                  <i class="fa-solid fa-circle-xmark ms-2" style="color: red"></i>
                <% end %>
              </td>
            </tr> 
            <tr>
              <td cols="2">
                <% if current_user && current_user.likes?(recipe) %>
                  <span class="badge bg-danger"> <i class="fa-solid fa-heart" style="font-size: 10pt"></i> </span>
                <% end %>
                <% if current_user && current_user.cooked?(recipe) %>
                  <span class="badge bg-secondary"> <i class="fa-solid fa-kitchen-set" style="font-size: 14pt"></i> </span>
                <% end %>   
              </td>
            </tr>               
          </table>



          <div>
            <%= time_ago_in_words recipe.created_at %> ago 
          </div>
          <div>
            <%= link_to recipe.user.email, user_path(recipe.user), target: "_top" %>
          </div>
          <div>
            <% if recipe.likes_count > 0 %>
              <span class="badge bg-danger"><i class="fa-solid fa-heart me-1"></i> <%= recipe.likes_count %></span>   
            <% end %>              
          </div>     



          <%= link_to recipe, class: "col-auto btn btn-primary me-1 mt-2" do %>
            Info <i class="fa-solid fa-info mx-2"></i>
          <% end %>  
          
          <% if user_signed_in? and recipe.user == current_user %>
            <%= link_to edit_recipe_path(recipe), class: "col-auto btn btn-warning me-1" do %>
              <i class="fa-solid fa-pen"></i>
            <% end %>  
            <%= link_to recipe, data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "col-auto btn btn-danger" do %>
              <i class="fa-solid fa-trash-can"></i>
            <% end %>      
          <% end %>

        </div>

    </div>
  <% end %>
</div>
